<h3>Phenotype Analysis
    <span style="font-size:1rem" class="pull-right" data-ng-if="!isDeprecated">
        <share-button></share-button>
    </span>
</h3>
<div data-ng-if="isDeprecated" class="alert-error">
    <i class="icon-attention"></i>This analysis is deprecated. This analysis was created against an old version of the data and may no longer be valid. Please remove or recreate it again.
</div>
<div data-ng-if="item && item.state === 'FINISHED'" data-disable-events="isDeprecated">
    <div>Your selected donor sets</div>
    <div class="wide">
        <table class="table">
            <thead>
                <tr>
                    <th>Set name</th>
                    <th># of items</th>
                </tr>
            </thead>
            <tbody>
                <tr data-ng-repeat="donorSet in setIds">
                    <td>{{donorSet}}</th>
                    <td>???</th>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="clearfix"></div>
    <br>


    <br>
    <div>Gender comparison</div>
    <div class="half">
        <table class="table">
            <thead>
                <tr>
                    <th></th>
                    <th colspan="2" style="color:{{seriesColours[0]}}">{{setIds[0]}}</th>
                    <th colspan="2" style="color:{{seriesColours[1]}}">{{setIds[1]}}</th>
                    <th colspan="2" style="color:{{seriesColours[2]}}" data-ng-if="setIds[2]">{{setIds[2]}}</th>
                </tr>
                <tr>
                    <th>Gender</th>
                    <th># of items</th>
                    <th>%</th>
                    <th># of items</th>
                    <th>%</th>
                    <th data-ng-if="setIds[2]"># of items</th>
                    <th data-ng-if="setIds[2]">%</th>
                </tr>
            </thead>
            <tbody>
                <tr data-ng-repeat="row in gender.uiTable">
                    <td>{{row.term}}</td>
                    <td class="text-right">{{row[setIds[0]].count}}</td>
                    <td class="text-right">{{row[setIds[0]].percentage*100 | number:2}}</td>
                    <td class="text-right">{{row[setIds[1]].count}}</td>
                    <td class="text-right">{{row[setIds[1]].percentage*100 | number:2}}</td>
                    <td class="text-right" data-ng-if="setIds[2]">{{row[setIds[2]].count}}</td>
                    <td class="text-right" data-ng-if="setIds[2]">{{row[setIds[2]].percentage*100 | number:2}}</td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="third omega">
        <grouped-bar data-items="gender.uiGraph" ylabel="% Donors" height="200" format="percentage" data-colours="seriesColours"></grouped-bar>
    </div>
    <div class="clearfix"></div>


    <br>
    <div>Vital status comparison</div>
    <div class="half">
        <table class="table">
            <thead>
                <tr>
                    <th></th>
                    <th colspan="2" style="color:{{seriesColours[0]}}">{{setIds[0]}}</th>
                    <th colspan="2" style="color:{{seriesColours[1]}}">{{setIds[1]}}</th>
                    <th colspan="2" style="color:{{seriesColours[2]}}" data-ng-if="setIds[2]">{{setIds[2]}}</th>
                </tr>
                <tr>
                    <th>Gender</th>
                    <th># of items</th>
                    <th>%</th>
                    <th># of items</th>
                    <th>%</th>
                    <th data-ng-if="setIds[2]"># of items</th>
                    <th data-ng-if="setIds[2]">%</th>
                </tr>
            </thead>
            <tbody>
                <tr data-ng-repeat="row in vital.uiTable">
                    <td>{{row.term}}</td>
                    <td class="text-right">{{row[setIds[0]].count}}</td>
                    <td class="text-right">{{row[setIds[0]].percentage*100 | number:2}}</td>
                    <td class="text-right">{{row[setIds[1]].count}}</td>
                    <td class="text-right">{{row[setIds[1]].percentage*100 | number:2}}</td>
                    <td class="text-right" data-ng-if="setIds[2]">{{row[setIds[2]].count}}</td>
                    <td class="text-right" data-ng-if="setIds[2]">{{row[setIds[2]].percentage*100 | number:2}}</td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="third omega">
        <grouped-bar data-items="vital.uiGraph" ylabel="% Donors" height="200" format="percentage" data-colours="seriesColours"></grouped-bar>
    </div>
    <div class="clearfix"></div>


    <br>
    <div>Age at diagnosis comparison</div>
    <div class="half">
        <table class="table">
            <thead>
                <tr>
                    <th></th>
                    <th colspan="2" style="color:{{seriesColours[0]}}">{{setIds[0]}}</th>
                    <th colspan="2" style="color:{{seriesColours[1]}}">{{setIds[1]}}</th>
                    <th colspan="2" style="color:{{seriesColours[2]}}" data-ng-if="setIds[2]">{{setIds[2]}}</th>
                </tr>
                <tr>
                    <th>Gender</th>
                    <th># of items</th>
                    <th>%</th>
                    <th># of items</th>
                    <th>%</th>
                    <th data-ng-if="setIds[2]"># of items</th>
                    <th data-ng-if="setIds[2]">%</th>
                </tr>
            </thead>
            <tbody>
                <tr data-ng-repeat="row in age.uiTable">
                    <td>{{row.term}}</td>
                    <td class="text-right">{{row[setIds[0]].count}}</td>
                    <td class="text-right">{{row[setIds[0]].percentage*100 | number:2}}</td>
                    <td class="text-right">{{row[setIds[1]].count}}</td>
                    <td class="text-right">{{row[setIds[1]].percentage*100 | number:2}}</td>
                    <td class="text-right" data-ng-if="setIds[2]">{{row[setIds[2]].count}}</td>
                    <td class="text-right" data-ng-if="setIds[2]">{{row[setIds[2]].percentage*100 | number:2}}</td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="half omega">
        <grouped-bar data-items="age.uiGraph" ylabel="% Donors" height="300" format="percentage" data-colours="seriesColours"></grouped-bar>
    </div>
    <div class="clearfix"></div>



</div>


