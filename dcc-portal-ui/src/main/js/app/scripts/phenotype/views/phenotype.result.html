<h3>Phenotype Comparison
    <span style="font-size:1rem" class="pull-right" data-ng-if="!isDeprecated">
        <share-button></share-button>
    </span>
</h3>
<div data-ng-if="isDeprecated" class="alert-error">
    <i class="icon-attention"></i>This analysis is deprecated. This analysis was created against an old version of the data and may no longer be valid. Please remove or recreate it again.
</div>
<div data-ng-if="item && item.state === 'FINISHED'" data-disable-events="isDeprecated">
    <div>Your selected donor sets</div>
    <div class="wide">
        <table class="table">
            <thead>
                <tr>
                    <th>Set name</th>
                    <th># of items</th>
                </tr>
            </thead>
            <tbody>
                <tr data-ng-repeat="donorSet in setIds">
                    <td style="color:{{seriesColours[$index]}}">{{setMap[donorSet].name}}</th>
                    <td class="text-right"><a href="/search?filters={{setFilters[$index]}}">{{setMap[donorSet].count}}</a></th>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="clearfix"></div>
    <br>


    <br>
    <div><strong>Gender comparison</strong></div>
    <div class="half">
        <table class="table" id="phenotype-gender">
            <thead>
                <tr>
                    <th></th>
                    <th colspan="2" style="color:{{seriesColours[0]}}">{{setMap[setIds[0]].name}}</th>
                    <th colspan="2" style="color:{{seriesColours[1]}}">{{setMap[setIds[1]].name}}</th>
                    <th colspan="2" style="color:{{seriesColours[2]}}" data-ng-if="setIds[2]">{{setMap[setIds[2]].name}}</th>
                </tr>
                <tr>
                    <th>Gender</th>
                    <th># of items</th>
                    <th>%</th>
                    <th># of items</th>
                    <th>%</th>
                    <th data-ng-if="setIds[2]"># of items</th>
                    <th data-ng-if="setIds[2]">%</th>
                </tr>
            </thead>
            <tbody>
                <tr data-ng-repeat="row in gender.uiTable">
                    <td>{{row.term | trans:true}}</td>
                    <td class="text-right"><a href="/search?filters={{row[setIds[0]].advQuery}}">{{row[setIds[0]].count}}</a></td>
                    <td class="text-right">{{row[setIds[0]].percentage*100 | number:2}}</td>
                    <td class="text-right"><a href="/search?filters={{row[setIds[1]].advQuery}}">{{row[setIds[1]].count}}</a></td>
                    <td class="text-right">{{row[setIds[1]].percentage*100 | number:2}}</td>
                    <td class="text-right" data-ng-if="setIds[2]"><a href="/search?filters={{row[setIds[2]].advQuery}}">{{row[setIds[2]].count}}</a></td>
                    <td class="text-right" data-ng-if="setIds[2]">{{row[setIds[2]].percentage*100 | number:2}}</td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="third omega">
        <grouped-bar data-items="gender.uiGraph" ylabel="% Donors" width="380" height="200" format="percentage" data-colours="seriesColours"></grouped-bar>
    </div>
    <div class="clearfix"></div>


    <br>
    <div><strong>Vital status comparison</strong></div>
    <div class="half">
        <table class="table" id="phenotype-status">
            <thead>
                <tr>
                    <th></th>
                    <th colspan="2" style="color:{{seriesColours[0]}}">{{setMap[setIds[0]].name}}</th>
                    <th colspan="2" style="color:{{seriesColours[1]}}">{{setMap[setIds[1]].name}}</th>
                    <th colspan="2" style="color:{{seriesColours[2]}}" data-ng-if="setIds[2]">{{setMap[setIds[2]].name}}</th>
                </tr>
                <tr>
                    <th>Status</th>
                    <th># of items</th>
                    <th>%</th>
                    <th># of items</th>
                    <th>%</th>
                    <th data-ng-if="setIds[2]"># of items</th>
                    <th data-ng-if="setIds[2]">%</th>
                </tr>
            </thead>
            <tbody>
                <tr data-ng-repeat="row in vital.uiTable">
                    <td>{{row.term | trans:true}}</td>
                    <td class="text-right"><a href="/search?filters={{row[setIds[0]].advQuery}}">{{row[setIds[0]].count}}</a></td>
                    <td class="text-right">{{row[setIds[0]].percentage*100 | number:2}}</td>
                    <td class="text-right"><a href="/search?filters={{row[setIds[1]].advQuery}}">{{row[setIds[1]].count}}</a></td>
                    <td class="text-right">{{row[setIds[1]].percentage*100 | number:2}}</td>
                    <td class="text-right" data-ng-if="setIds[2]"><a href="/search?filters={{row[setIds[2]].advQuery}}">{{row[setIds[2]].count}}</a></td>
                    <td class="text-right" data-ng-if="setIds[2]">{{row[setIds[2]].percentage*100 | number:2}}</td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="third omega">
        <grouped-bar data-items="vital.uiGraph" ylabel="% Donors" format="percentage" width="380" height="200" data-colours="seriesColours"></grouped-bar>
    </div>
    <div class="clearfix"></div>


    <br>
    <div><strong>Age at diagnosis comparison</strong></div>
    <div class="half">
        <table class="table" id="phenotype-age">
            <thead>
                <tr>
                    <th></th>
                    <th colspan="2" style="color:{{seriesColours[0]}}">{{setMap[setIds[0]].name}}</th>
                    <th colspan="2" style="color:{{seriesColours[1]}}">{{setMap[setIds[1]].name}}</th>
                    <th colspan="2" style="color:{{seriesColours[2]}}" data-ng-if="setIds[2]">{{setMap[setIds[2]].name}}</th>
                </tr>
                <tr>
                    <th>Age group</th>
                    <th># of items</th>
                    <th>%</th>
                    <th># of items</th>
                    <th>%</th>
                    <th data-ng-if="setIds[2]"># of items</th>
                    <th data-ng-if="setIds[2]">%</th>
                </tr>
            </thead>
            <tbody>
                <tr data-ng-repeat="row in age.uiTable">
                    <td>{{row.term | trans:true}}</td>
                    <td class="text-right"><a href="/search?filters={{row[setIds[0]].advQuery}}">{{row[setIds[0]].count}}</a></td>
                    <td class="text-right">{{row[setIds[0]].percentage*100 | number:2}}</td>
                    <td class="text-right"><a href="/search?filters={{row[setIds[1]].advQuery}}">{{row[setIds[1]].count}}</a></td>
                    <td class="text-right">{{row[setIds[1]].percentage*100 | number:2}}</td>
                    <td class="text-right" data-ng-if="setIds[2]"><a href="/search?filters={{row[setIds[2]].advQuery}}">{{row[setIds[2]].count}}</a></td>
                    <td class="text-right" data-ng-if="setIds[2]">{{row[setIds[2]].percentage*100 | number:2}}</td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="half omega">
        <grouped-bar data-items="age.uiGraph" ylabel="% Donors" height="300" width="380" format="percentage" data-colours="seriesColours"></grouped-bar>
    </div>
    <div class="clearfix"></div>

</div>


