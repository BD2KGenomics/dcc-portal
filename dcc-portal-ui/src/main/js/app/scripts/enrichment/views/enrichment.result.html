<div data-ng-if="item.state === 'EXECUTING'">
    <!--<h3>Enrichment Result</h3>-->
    <h1 class="text-center"><i class="icon-spinner icon-spin" style="font-size:5rem"></i></h1>
</div>
<div data-ng-if="item.state === 'FINISHED'"> 
    <!--<h3>Enrichment Result</h3>-->
    <div>
        <h4>Overview</h4>
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>Universe</th>
                    <th># Gene set in Universe</th>
                    <th># Gene set in overlap</th>
                    <th># Genes in Universe</th>
                    <th># Genes in overlap</th>
                    <th># Input genes</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>{{item.params.universe}}</td>
                    <td class="text-right">{{item.overview.universeGeneSetCount | number}}</td>
                    <td class="text-right">{{item.overview.overlapGeneSetCount | number}}</td>
                    <td class="text-right">{{item.overview.universeGeneCount | number}}</td>
                    <td class="text-right">{{item.overview.overlapGeneCount | number}}</td>
                    <td class="text-right">{{item.params.maxGeneCount | number}}</td>
                </tr>
            </tbody>
        </table>
        <br>

        <h4>Original Query:</h4>
        <div>
            <a href="/search?filters={{item.query.filters}}">
                <span>
                    <query-display data-filters="item.query.filters"></query-display>
                </span>
            </a>
        </div>
        <br>
        
        <h4 data-ng-if="item.params.maxGeneCount <= item.overview.universeGeneCount">
            Top {{item.params.maxGeneSetCount | number}} gene sets out of {{item.overview.universeGeneSetCount | number}} enriched gene sets with FDR &lt;= {{item.params.fdr}}
        </h4>
        <h4 data-ng-if="item.params.maxGeneCount > item.overview.universeGeneCount">
            {{item.overview.universeGeneSetCount | number}} enriched gene sets with FDR &lt;= {{item.params.fdr}}
        </h4>

        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th># Genes</th>
                    <th># Genes in overlap</th>
                    <th># Donors affected</th>
                    <th># Mutations</th>
                    <th>Expected</th>
                    <th style="cursor: pointer"
                        data-ng-click="predicate='pvalue'; reverse=!reverse">P-Value
                        <i style="color:hsl(0,0%,80%)" data-ng-if="predicate!='pvalue'" class="icon-sort"></i>
                        <i data-ng-if="predicate=='pvalue'&& !reverse" class="icon-sort-up"></i>
                        <i data-ng-if="predicate=='pvalue'&& reverse" class="icon-sort-down"></i>
                    </th>
                    <th style="cursor: pointer"
                        data-ng-click="predicate='adjustedPValue'; reverse=!reverse">Adjusted P-Value
                        <i style="color:hsl(0,0%,80%)" data-ng-if="predicate!='adjustedPValue'" class="icon-sort"></i>
                        <i data-ng-if="predicate=='adjustedPValue'&&!reverse" class="icon-sort-up"></i>
                        <i data-ng-if="predicate=='adjustedPValue'&&reverse" class="icon-sort-down"></i>
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr data-ng-repeat="row in item.results | orderBy:predicate:reverse">
                    <td><a data-ng-href="/genesets/{{row.geneSetId}}">{{row.geneSetId}}</a></td>
                    <td>{{row.geneSetName}}</td>
                    <td class="text-right">{{row.geneCount | number}}</td>
                    <td class="text-right">{{row.overlapGeneCount | number}}</td>
                    <td class="text-right">{{row.overlapDonorCount | number}}</td>
                    <td class="text-right">{{row.overlapMutationCount | number}}</td>
                    <td class="text-right">{{row.expectedValue.toExponential(5) }}</td>
                    <td class="text-right">{{row.pvalue.toExponential(5) }}</td>
                    <td class="text-right">{{row.adjustedPValue.toExponential(5) }}</td>
                </tr>
            </tbody>
        </table>
        <br>
        <span>
            Documentation for Enrichment analysis is available on this link: 
            <a href="">Enrichment Analysis Documentation</a>
        </span>
    </div>
</div>
