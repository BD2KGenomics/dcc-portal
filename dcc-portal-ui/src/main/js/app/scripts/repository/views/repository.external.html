<aside class="t_sidebar">
    <div style="position: relative; margin-right: -2rem">
        <ul class="t_facets">
            <li data-tags-facet
                data-type="file"
                data-facet-name="id"
                data-proxy-type="file"
                data-proxy-facet-name="fileName"
                data-label="File"></li>
            <li data-tags-facet
                data-type="file-donor"
                data-facet-name="id"
                data-label="Donor"
                data-proxy-type="file"
                data-proxy-facet-name="donorId"></li>
            <terms data-type="file" data-facet-name="projectCode"
                   data-label="Project"
                   data-facet="ExternalRepoController.files.termFacets.projectCode"></terms>
            <terms data-type="file" data-facet-name="primarySite"
                   data-label="Primary Site"
                   data-facet="ExternalRepoController.files.termFacets.primarySite"></terms>
            <terms data-type="file" data-facet-name="repositoryNames"
                   data-facet="ExternalRepoController.files.termFacets.repositoryNames"
                   data-label="Repository"></terms>
            <terms data-type="file" data-facet-name="dataType"
                   data-label="Data Type"
                   data-facet="ExternalRepoController.files.termFacets.dataType"></terms>
            <terms data-type="file" data-facet-name="study"
                   data-label="Only Files in Study"
                   data-missing-text="None"
                   data-facet="ExternalRepoController.files.termFacets.study"></terms>
            <terms data-type="file" data-facet-name="dataFormat"
                   data-label="File Format"
                   data-facet="ExternalRepoController.files.termFacets.dataFormat"></terms>
            <terms data-type="file" data-facet-name="access"
                   data-label="Access"
                   data-facet="ExternalRepoController.files.termFacets.access"></terms>
            <terms data-type="file" data-facet-name="donorStudy"
                   data-label="Only Donors in Study"
                   data-missing-text="None"
                   data-facet="ExternalRepoController.files.termFacets.donorStudy"></terms>
        </ul>
    </div>
</aside>
<article style="position: relative;">
        <current></current>
    <section style="padding-top:0">
        <div>
            <p>External repositories content indexed on {{ExternalRepoController.repoCreationTime | date}} <br>


               ICGC raw data and other data are available in other repositories. You can use this tool to search for 
               files of your interest and create a manifest used by <a href="https://docs.icgc.org/access-controlled-data" target="_blank">
               <i class="icon-external-link"></i>authorized users</a> 
               for repository-specific download software.
            </p>
        </div>

        <div class="empty loading-text" data-ng-if="ExternalRepoController.files.hits.length === 0">
            <h3>No Files Found</h3>
        </div>
        <div data-ng-if="ExternalRepoController.files.hits.length">
            <div style="margin-bottom:0.5rem">
                <button class="t_button" data-ng-click="ExternalRepoController.downloadManifest()">
                    <i class="icon-download"></i>Download manifests (
                      {{ ExternalRepoController.selectedFiles.length === 0?  ExternalRepoController.files.pagination.total : ExternalRepoController.selectedFiles.length | number}}

                      files )
                </button>
                <span>
                    <a href="" target="_blank"><i class="icon-external-link"></i>How to download data in external repository</a>
                </span>
            </div>

            <div class="t_table_top">
                <span data-table-counts data-label="files" data-page="ExternalRepoController.files.pagination"></span>
                <span class="t_tools">
                    <span class="t_tools__tool">
                        <i class="icon-file pull-right"
                           data-tooltip="Export table as TSV" data-tooltip-placement="left"
                           data-ng-click="ExternalRepoController.export()"></i>
                    </span>
                </span>
            </div>

            <table class="table table-selectable">
                <thead>
                    <th>&nbsp;</th>
                    <th data-sortable data-type="files" data-field="fileName" data-active="true" data-reversed="true">File Name</th>
                    <th data-sortable data-type="files" data-field="donorId">Donor</th>
                    <th>Repository</th>
                    <th data-sortable data-type="files" data-field="projectCode">Project</th>
                    <th>Study</th>
                    <th>Data type</th>
                    <th>Format</th>
                    <th data-sortable data-type="files" data-field="fileSize">Size</th>
                </thead>
                <tbody>
                    <tr data-ng-repeat="row in ExternalRepoController.files.hits">
                        <td class="text-center" data-ng-click="ExternalRepoController.toggleRow(row)" style="cursor:pointer">
                           <i class="{{ ExternalRepoController.isSelected(row)? 'icon-check':'icon-check-empty' }}"></i>
                        </td>
                        <td style="max-width:28rem; font-size: {{ row.fileName.length > 100? '0.75rem' : ' inherit' }}">
                           <i class="{{row.access==='open'? 'icon-lock-open':'icon-lock'}}"></i>
                           {{row.fileName}}
                        </td>
                        <td><a href="/donors/{{row.donorId}}">{{row.donorId}}</a></td>
                        <td>{{row.repositoryNames.join(', ') }}</td>
                        <td><a href="/projects/{{row.projectCode}}">{{row.projectCode}}</a></td>
                        <td>
                            <span class="badge" style="font-size:0.5rem" data-ng-if="row.study === 'PCAWG'"><small>PCAWG</small></span>
                            <span data-ng-if="row.study !== 'PCAWG'">{{row.study}}</span>
                        </td>
                        <td>
                            <ul>
                                <li data-ng-repeat="item in row.dataType track by $index">{{item}}</li>
                            </ul>
                        </td>
                        <td>
                            <ul>
                                <li data-ng-repeat="item in row.dataFormat track by $index">{{item}}</li>
                            </ul>
                        </td>
                        <td>{{row.fileSize | bytes }}</td>
                    </tr>
                </tbody>
            </table>
           <pagination-controls data-type="files" data-data="ExternalRepoController.files"></pagination-controls>
        </div>
    </section>
</article>
