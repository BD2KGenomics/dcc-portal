<div data-ng-if="item.state === 'IN_PROGRESS'">
    <h1 class="text-center"><i class="icon-spinner icon-spin" style="font-size:5rem"></i></h1>
</div>
<span data-ng-if="item.state === 'FINISHED'">

    <set-upload data-set-modal="dialog.setModal" data-set-union="dialog.setUnion" data-set-type="dialog.setType"></set-upload>

    <div class="canvas half"></div>
    <div class="half omega">

        <table class="table">
            <thead>
                <tr>
                    <th>Alias</th>
                    <th>Set name</th>
                    <th class="text-right"># of items</th>
                    <th>Item type</th>
                </tr>
            </thead>
            <tbody>
                <tr data-ng-repeat="item in setList">
                    <td>{{getSetShortHand(item, setList)}}</td>
                    <td>{{setMap[item].name}}</td>
                    <td class="text-right">{{setMap[item].count | number}}</td>
                    <td>{{setMap[item].type.toLowerCase()}}</td>
                </tr>
            </tbody>
        </table>
        <br>

        <table class="table">
            <thead>
                <th>
                    <span data-ng-click="checked=!checked; checked? selectAll() : selectNone()">
                        <i class="{{checked? 'icon-check':'icon-check-empty'}}"></i>
                    </span>
                </th>
                <th>Set operations</th>
                <th># of items</th>
                <th></th>
            </thead>
            <tbody>
                <tr data-ng-repeat="item in data"
                    data-ng-mouseenter="tableMouseEnter(item.intersection)"
                    data-ng-mouseleave="tableMouseOut(item.intersection)">

                    <td style="cursor:pointer" data-ng-click="toggleSelection(item.intersection, item.count)">
                        <i class="{{ isSelected(item.intersection)? 'icon-check' : 'icon-check-empty'}}"></i>
                    </td>
                    <td>
                        <span data-ng-bind-html="displaySetOperation(item, setList)"></span>
                    </td>
                    <td class="text-right">
                        <a data-ng-if="item.count > 0" data-ng-click="redirect(item)" href="">{{item.count | number}}</a>
                        <span data-ng-if="item.count === 0">{{item.count | number}}</span>
                    </td>
                    <td>
                        <span class="t_tools" style="float:left"> 
                            <span class="t_tools__tool" data-ng-if="item.count > 0">
                                <i class="icon-file" data-tooltip="Export" data-ng-click="export(item)"></i>
                                <i class="icon-floppy" data-tooltip="Save as new list" 
                                  data-ng-click="calculateUnion(item); dialog.setModal=true"></i>
                            </span>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td colspan="2">Union of selected sets</td>
                    <td class="text-right">
                        <a data-ng-if="selectedTotalCount > 0" data-ng-click="redirect()" href="">{{selectedTotalCount | number}}</a>
                        <span data-ng-if="selectedTotalCount===0">0</span>
                    </td>
                    <td>
                        <span class="t_tools" style="float:left" data-ng-if="selectedTotalCount > 0"> 
                            <span class="t_tools__tool">
                                <i class="icon-file" data-tooltip="Export" data-ng-click="export()"></i>
                                <i class="icon-floppy" data-tooltip="Save as new list" data-ng-click="calculateUnion(); dialog.setModal=true"></i>
                            </span>
                        </span>
                    </td>
                </tr>
            </tbody>
        </table>


    </div>
</span>
