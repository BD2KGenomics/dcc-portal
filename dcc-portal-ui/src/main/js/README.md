ICGC DCC - Portal UI
===

Requiments
---

- Install [node.js](http://nodejs.org/download/ )
- Install ruby
- Install rubygems
- Install global modules:

	```
	npm install -g grunt-cli@0.1.13
	npm install -g bower@1.3.12`
	```

Setup
---

- Install local modules

	```
	cd src/main/js
	npm install
	```
	
- Install client-side dependencies	
	```
	cd src/main/js
	npm install -g bower
	bower install
	```
	
- Install ruby gems

	```
	cd src/main/js	
	sudo gem install bundler -v 1.5.3
	bundle install
	```

Run
---

- Start node development server: `grunt server`
- Start the [Portal API](../dcc-portal-api/README.md)
- View the site: [localhost:9000](http://localhost:9000/)

## Style Guide


- Max line length: 120
- Spaces NOT Tabs
- 2 Spaces per indent
- Strings in 'single quotes'
- camelCase for variable names
- Use === instead of ==
- Fields generated by the UI should be prefixed with 'ui'
- Use jQuery not $

## Coding Conventions


### Angular Modules


#### The Module Folder Structure
- In general modules are self contained in the  ```app/scripts``` directory.
- Each module has is named in all lowercase and is comprised of a *js*, *views*, *styles*. See below:

    ```
    module_name/
      |__ js/
      |__ views/
      |__ styles/
    ```

- The *js* folder contains your angularJS controllers, services, filters, etc.
- The *views* folder contains your angularJS html templates.
- The *styles* folder contains your scss (sass) files pertaining (i.e. relevant to the styling of your html views).
#### Module Breakdown
- Modules are broken down according to the function it serves within the application. This means that your module names
should reflect the functionality provided by your module and provide a simple (relatively flat structure) to gain access
to your module's' angular assets.

- In general it is preferred that you use the ```.``` notation to separate your namespaced module from others.

  - For example if you were to create a module that provided gene set functionality your module name could be called
```geneset``` with the primary module definition (including possible application routing), *controllers*, *services*/*factories* and *directives*, *filters*, etc. being ```geneset.controllers```,
 ```geneset.services```, ```geneset.directives``` and ```geneset.filters``` respectively with each of these modules
 living in their own *geneset.js*, *controllers.js*, *services.js*, *directives.js* and *filters.js* files respectively under the ``js`` folder.
#### Rationale for an Angular Flat Structure
- It could certainly be argued that it would be better to breakdown the angular assets even further (which is great for unit tests) into each individual controller, directive or service however
we feel that this may introduce too much complexity for very little payback. As such we have opted for a middle ground approach. That is either the whole module is included in
its entirety or none at all.


### Private methods and Variables

The bad example...
```
    // A private function
    function meaningOfLife() {
    }

    // A private variable
    var theMeaningOfLife = 42;
```

The good example...
```
    // A private function
    function _meaningOfLife() {
    }

    // A private variable
    var _theMeaningOfLife = 42;
```

### Referencing the "this" context in your Angular Services and Controllers

##### Service Context:
```
var _service = this;
```

##### Controller Context:
```
var _controller = this;
```
##### In General
```
var _this = this;
```

### Setter/Getter Methods
```
var _meaningOfLifeVar;

function meaningOfLife(answer) {

    if (arguments.length === 1) {
        _meaningOfLifeVar = answer;
    }

    return _meaningOfLifeVar;
}

console.log(meaningOfLife()); // Outputs 'undefined'
console.log(meaningOfLife(1)); // Outputs '1'

meaningOfLife(42);

console.log(meaningOfLife()); // Outputs '42'

```




Before Pull Request
---

Pass JSHint: `grunt jshint`

Pass Unit tests: `grunt test`

Tips
---

If a production build fails to produce the expected output when deployed, try `rm -rf src/main/js/node_modules` and rebuilding.


